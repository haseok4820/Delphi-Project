unit Frame_StockInfo;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes,
  Vcl.Graphics, Vcl.Controls, Vcl.Forms, Vcl.Dialogs, Vcl.StdCtrls, Frame_ComboBox;

type
  TFrameStockInfo = class(TFrame)
    Label_StockCode: TLabel;
    Edit_StockName: TEdit;
    Edit_Value: TEdit;
    FrmCombo_Value: TFrame_ENV_ComboBox;
    procedure Label_StockCodeClick(Sender: TObject);
    procedure EditChange(Sender: TObject);
    procedure FrmCombo_ValueClick(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

const
  EDIT_PRICE = 0;
  EDIT_NOTICE = 1;
  EDIT_TIME = 2;
  EDIT_ADDPRICE = 3;
  EDIT_ADDTIME = 4;

  COMBO_KIT = 0;
  COMBO_CATEGORY = 1;
  COMBO_SET = 2;
  COMBO_SPEC = 3;
  COMBO_VAT = 4;

var
  arrStockType: array [0 .. 8] of String = (
    '과세',
    '면세',
    '시간',
    '옵션',
    '옵면',
    '비품',
    '단종',
    '하위',
    '개체'
  ); // 상품 구분

  arrStockKitPrn: array [0 .. 11] of String = (
    '출력안함',
    'Printer1',
    'Printer2',
    'Printer3',
    'Printer4',
    'Printer5',
    'Printer6',
    '특정메뉴전송1',
    '특정메뉴전송2',
    '특정메뉴전송3',
    '특정메뉴전송4',
    '특정메뉴전송5'
  ); // 주방출력

implementation

{$R *.dfm}

uses uDM;

procedure TFrameStockInfo.EditChange(Sender: TObject);
var
  sText: String;
begin
  if (Sender as TEdit).Name = 'Edit_StockName' then
    arrStockInfo[Self.Tag].sStockName := (Sender as TEdit).Text
  else
  begin
    sText := (Sender as TEdit).Text;
    case (Sender as TEdit).Tag of
      EDIT_PRICE:
        arrStockInfo[Tag].iStockAMT := StrToIntDef(sText, 0);
      EDIT_NOTICE:
        arrStockInfo[Tag].sStandard := sText;
      EDIT_TIME:
        arrStockInfo[Tag].sUnit := sText;
      EDIT_ADDPRICE:
        arrStockInfo[Tag].iMaeipAMT := StrToIntDef(sText, 0);
      EDIT_ADDTIME:
        arrStockInfo[Tag].iNowMaeip := StrToIntDef(sText, 0);
    end;
  end;

end;

procedure TFrameStockInfo.FrmCombo_ValueClick(Sender: TObject);
var
  iTag: NativeInt;
begin
  //
  iTag := (Sender as TFrame_ENV_ComboBox).Tag;
  case iTag of
    COMBO_KIT:
      arrStockInfo[Tag].sKitPrn := FrmCombo_Value.Label_Key.Tag;
    COMBO_CATEGORY:
      FrmCombo_Value.Label_Key.Caption := '';
    COMBO_SET:
      FrmCombo_Value.Label_Key.Caption := '';
    COMBO_SPEC:
      FrmCombo_Value.Label_Key.Caption := '';
    COMBO_VAT:
      FrmCombo_Value.Label_Key.Caption := sVAT;

  end;

end;

procedure TFrameStockInfo.Label_StockCodeClick(Sender: TObject);
begin
  Color := clSkyBlue;
  if Assigned(Self.OnClick) then
    Self.OnClick(Self);
end;

end.
